<!doctype html>
<html lang="ru-RU" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.13" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.48" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <title>Backend-–ø—Ä–æ–µ–∫—Ç | –í–µ–ª–¥–ë–æ–∫—Å</title><meta name="description" content="–ó–¥–µ—Å—å –≤—ã –ø–æ–∑–Ω–∞–µ—Ç–µ —Å–∏–ª—É">
    <link rel="preload" href="/atom_docs/assets/style-DfGMk7CG.css" as="style"><link rel="stylesheet" href="/atom_docs/assets/style-DfGMk7CG.css">
    <link rel="modulepreload" href="/atom_docs/assets/app-Chc13kEl.js"><link rel="modulepreload" href="/atom_docs/assets/backend.html-BbnK6WY6.js"><link rel="modulepreload" href="/atom_docs/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/atom_docs/assets/index.html-CuPNu1tP.js" as="script"><link rel="prefetch" href="/atom_docs/assets/auth.html-BsG-ocbv.js" as="script"><link rel="prefetch" href="/atom_docs/assets/index.html-DehctG3_.js" as="script"><link rel="prefetch" href="/atom_docs/assets/lessons.html-D-Id9-la.js" as="script"><link rel="prefetch" href="/atom_docs/assets/tasks.html-Cs3qFbxJ.js" as="script"><link rel="prefetch" href="/atom_docs/assets/topics.html-BRnOc-eB.js" as="script"><link rel="prefetch" href="/atom_docs/assets/index.html-Dgv7N2Mo.js" as="script"><link rel="prefetch" href="/atom_docs/assets/frontend.html-CwNHJwml.js" as="script"><link rel="prefetch" href="/atom_docs/assets/index.html-1jN3rxhu.js" as="script"><link rel="prefetch" href="/atom_docs/assets/buttons.html-jdUur4VH.js" as="script"><link rel="prefetch" href="/atom_docs/assets/database_model.html-n1sUf-6j.js" as="script"><link rel="prefetch" href="/atom_docs/assets/endpoints.html-Cc_PXxjZ.js" as="script"><link rel="prefetch" href="/atom_docs/assets/index.html-4QpFJ5MK.js" as="script"><link rel="prefetch" href="/atom_docs/assets/jwts.html-m6PsxI4i.js" as="script"><link rel="prefetch" href="/atom_docs/assets/404.html-DfQqGg5D.js" as="script"><link rel="prefetch" href="/atom_docs/assets/photoswipe.esm-GXRgw7eJ.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é</a><!--]--><!--[--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/atom_docs/"><!----><!----><span class="vp-site-name">–í–µ–ª–¥–ë–æ–∫—Å</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/atom_docs/" aria-label="–ì–ª–∞–≤–Ω–∞—è"><!---->–ì–ª–∞–≤–Ω–∞—è<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/atom_docs/database/" aria-label="–°—Ö–µ–º–∞ –ë–î"><!---->–°—Ö–µ–º–∞ –ë–î<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/atom_docs/solution_architecture/" aria-label="–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞"><!---->–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link route-link-active auto-link" href="/atom_docs/project/" aria-label="–ü—Ä–æ–µ–∫—Ç"><!---->–ü—Ä–æ–µ–∫—Ç<!----></a></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><!----><!----><!----><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/atom_docs/" aria-label="–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –í–µ–ª–¥–ë–æ–∫—Å"><!---->–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –í–µ–ª–¥–ë–æ–∫—Å<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/atom_docs/database/" aria-label="–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –º–æ–¥–µ–ª–∏ –ë–î"><!---->–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –º–æ–¥–µ–ª–∏ –ë–î<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/atom_docs/solution_architecture/" aria-label="–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"><!---->–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><a class="route-link route-link-active auto-link vp-sidebar-title no-external-link-icon" href="/atom_docs/project/" aria-label="–°—Ö–µ–º–∞ –ø—Ä–æ–µ–∫—Ç–∞"><!---->–°—Ö–µ–º–∞ –ø—Ä–æ–µ–∫—Ç–∞<!----></a><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/atom_docs/project/frontend.html" aria-label="Frontend-–ø—Ä–æ–µ–∫—Ç"><!---->Frontend-–ø—Ä–æ–µ–∫—Ç<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/atom_docs/project/backend.html" aria-label="Backend-–ø—Ä–æ–µ–∫—Ç"><!---->Backend-–ø—Ä–æ–µ–∫—Ç<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Backend-–ø—Ä–æ–µ–∫—Ç</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="–î–∞—Ç–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏—èüìÖ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-06-15T19:44:55.000Z"></span><!----><span class="page-reading-time-info" aria-label="–í—Ä–µ–º—è —á—Ç–µ–Ω–∏—è‚åõ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>–û–∫–æ–ª–æ 5 –º–∏–Ω</span><meta property="timeRequired" content="PT5M"></span><!----><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">–ù–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ<button type="button" class="print-button" title="–ü–µ—á–∞—Ç—å"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#—Å—Ö–µ–º–∞-–ø—Ä–æ–µ–∫—Ç–∞-–≤-–≤–∏–¥–µ-–¥–µ—Ä–µ–≤–∞-ascii">–°—Ö–µ–º–∞ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –≤–∏–¥–µ –¥–µ—Ä–µ–≤–∞ ASCII</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#dockerfile">Dockerfile</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#pom-xml">pom.xml</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#src-test-java-ru-atomskills-back-backapplicationtest-java">src/test/java/ru/atomskills/back/BackApplicationTest.java</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#src-main-java-ru-atomskills-back">src/main/java/ru/atomskills/back</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#configs">configs</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#controllers">controllers</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#dto">dto</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#repositories">repositories</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#services">services</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#utils">utils</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h1 id="backend-–ø—Ä–æ–µ–∫—Ç" tabindex="-1"><a class="header-anchor" href="#backend-–ø—Ä–æ–µ–∫—Ç"><span>Backend-–ø—Ä–æ–µ–∫—Ç</span></a></h1><p>Backend –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≤ –≤–∏–¥–µ <strong>Java Spring</strong> –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. <strong>Maven</strong> –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø–∏—Å–∞–Ω–∏—è –∏—Ö –æ–ø–∏—Å–∞–Ω–∏—è –≤ —Ñ–∞–π–ª–µ <strong>pom.xml</strong> –í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è</p><ul><li>Spring Boot - –¥–ª—è –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ Java Spring –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è;</li></ul><hr><ul><li>PostgreSQL - –¥–ª—è —Å–≤—è–∑–∏ —Å –°–£–ë–î PostgreSQL;</li></ul><hr><ul><li>Lombok - —É–¥–æ–±–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞;</li></ul><hr><ul><li>JsonWebToken - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å JsonWebToken. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏;</li></ul><hr><ul><li>Hibernate - –î–≤–∏–∂–æ–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º ORM;</li></ul><h2 id="—Å—Ö–µ–º–∞-–ø—Ä–æ–µ–∫—Ç–∞-–≤-–≤–∏–¥–µ-–¥–µ—Ä–µ–≤–∞-ascii" tabindex="-1"><a class="header-anchor" href="#—Å—Ö–µ–º–∞-–ø—Ä–æ–µ–∫—Ç–∞-–≤-–≤–∏–¥–µ-–¥–µ—Ä–µ–≤–∞-ascii"><span>–°—Ö–µ–º–∞ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –≤–∏–¥–µ –¥–µ—Ä–µ–≤–∞ <strong>ASCII</strong></span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>Dockerfile</span></span>
<span class="line"><span>pom.xml</span></span>
<span class="line"><span>src/</span></span>
<span class="line"><span>‚îú‚îÄ main/</span></span>
<span class="line"><span>‚îÇ  ‚îú‚îÄ resources/</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îú‚îÄ materials/</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ features.json</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ lessons/</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îú‚îÄ application.properties</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îú‚îÄ data.sql</span></span>
<span class="line"><span>‚îÇ  ‚îú‚îÄ java/</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îú‚îÄ ru/</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ atomskills/</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ back/</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ configs/</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ JwtAuthFilter.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ RestAdviser.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ SecurityConfig.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ controllers/</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ AuthenticationController.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ LessonsController.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ SomeEntityController.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ TasksController.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ TopicsController.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ dto/</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ AuthRequest.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ LessonDto.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ LessonShortDto.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ LoginResponse.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ RefreshRequest.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ TaskDto.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ TaskShortDto.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ models/</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ AppUser.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ Feature.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ Lesson.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ Role.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ SomeEntity.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ Task.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ TaskProgress.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ TaskSubmission.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ Topic.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ Trait.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ repositories/</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ AppUserRepository.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ FeaturesRepository.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ LessonsRepository.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ SomeEntityRepository.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ TaskProgressRepository.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ TasksRepository.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ TopicsRepository.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ TraitsRepository.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ specifications/</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ SomeEntityRepositorySpecification.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ services/</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ AppUserService.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ AuthenticationService.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ FileLoader.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ LessonsService.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ SomeEntity.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ TasksService.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ TopicsService.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ utils/</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ FilesUtil.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ JwtUtil.java</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ BackApplication.java</span></span>
<span class="line"><span>‚îú‚îÄ test/</span></span>
<span class="line"><span>‚îÇ  ‚îú‚îÄ java/</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îú‚îÄ ru/</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ atomskills/</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ back/</span></span>
<span class="line"><span>‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ  ‚îú‚îÄ BackApplicationTests.java</span></span>
<span class="line"><span>Dockerfile</span></span>
<span class="line"><span>pom.xml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h2 id="dockerfile" tabindex="-1"><a class="header-anchor" href="#dockerfile"><span>Dockerfile</span></a></h2><p>–§–∞–π–ª —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∫–æ–º–∞–Ω–¥ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç–∫–∏ —Å –ø–æ–º–æ—â—å—é Docker</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>FROM mirror.gcr.io/eclipse-temurin:21-jdk-jammy</span></span>
<span class="line"><span></span></span>
<span class="line"><span>WORKDIR /app</span></span>
<span class="line"><span></span></span>
<span class="line"><span>COPY .mvn/ .mvn</span></span>
<span class="line"><span>COPY mvnw pom.xml ./</span></span>
<span class="line"><span></span></span>
<span class="line"><span>RUN sed -i &#39;s/\r$//&#39; ./mvnw &amp;&amp; chmod +x ./mvnw &amp;&amp; ./mvnw dependency:resolve</span></span>
<span class="line"><span></span></span>
<span class="line"><span>COPY src ./src</span></span>
<span class="line"><span></span></span>
<span class="line"><span>CMD [&quot;./mvnw&quot;, &quot;spring-boot:run&quot;]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h2 id="pom-xml" tabindex="-1"><a class="header-anchor" href="#pom-xml"><span>pom.xml</span></a></h2><p>–û–ø–∏—Å—ã–≤–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø—Ä–æ–µ–∫—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span>
<span class="line"><span>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span>
<span class="line"><span>	xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span></span>
<span class="line"><span>	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span></span>
<span class="line"><span>	&lt;parent&gt;</span></span>
<span class="line"><span>		&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></span>
<span class="line"><span>		&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span></span>
<span class="line"><span>		&lt;version&gt;3.3.0&lt;/version&gt;</span></span>
<span class="line"><span>		&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;</span></span>
<span class="line"><span>	&lt;/parent&gt;</span></span>
<span class="line"><span>	&lt;groupId&gt;ru.atomskills&lt;/groupId&gt;</span></span>
<span class="line"><span>	&lt;artifactId&gt;back&lt;/artifactId&gt;</span></span>
<span class="line"><span>	&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</span></span>
<span class="line"><span>	&lt;name&gt;back&lt;/name&gt;</span></span>
<span class="line"><span>	&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;</span></span>
<span class="line"><span>	&lt;properties&gt;</span></span>
<span class="line"><span>		&lt;java.version&gt;21&lt;/java.version&gt;</span></span>
<span class="line"><span>	&lt;/properties&gt;</span></span>
<span class="line"><span>	&lt;dependencies&gt;</span></span>
<span class="line"><span>		&lt;dependency&gt;</span></span>
<span class="line"><span>			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></span>
<span class="line"><span>			&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;</span></span>
<span class="line"><span>		&lt;/dependency&gt;</span></span>
<span class="line"><span>		&lt;dependency&gt;</span></span>
<span class="line"><span>			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></span>
<span class="line"><span>			&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;</span></span>
<span class="line"><span>		&lt;/dependency&gt;</span></span>
<span class="line"><span>		&lt;dependency&gt;</span></span>
<span class="line"><span>			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></span>
<span class="line"><span>			&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;</span></span>
<span class="line"><span>		&lt;/dependency&gt;</span></span>
<span class="line"><span>		&lt;dependency&gt;</span></span>
<span class="line"><span>			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></span>
<span class="line"><span>			&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span></span>
<span class="line"><span>		&lt;/dependency&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>		&lt;dependency&gt;</span></span>
<span class="line"><span>			&lt;groupId&gt;org.postgresql&lt;/groupId&gt;</span></span>
<span class="line"><span>			&lt;artifactId&gt;postgresql&lt;/artifactId&gt;</span></span>
<span class="line"><span>			&lt;scope&gt;runtime&lt;/scope&gt;</span></span>
<span class="line"><span>		&lt;/dependency&gt;</span></span>
<span class="line"><span>		&lt;dependency&gt;</span></span>
<span class="line"><span>			&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span></span>
<span class="line"><span>			&lt;artifactId&gt;lombok&lt;/artifactId&gt;</span></span>
<span class="line"><span>			&lt;optional&gt;true&lt;/optional&gt;</span></span>
<span class="line"><span>		&lt;/dependency&gt;</span></span>
<span class="line"><span>		&lt;dependency&gt;</span></span>
<span class="line"><span>			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></span>
<span class="line"><span>			&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span></span>
<span class="line"><span>			&lt;scope&gt;test&lt;/scope&gt;</span></span>
<span class="line"><span>		&lt;/dependency&gt;</span></span>
<span class="line"><span>		&lt;dependency&gt;</span></span>
<span class="line"><span>			&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;</span></span>
<span class="line"><span>			&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;</span></span>
<span class="line"><span>			&lt;scope&gt;test&lt;/scope&gt;</span></span>
<span class="line"><span>		&lt;/dependency&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>		&lt;dependency&gt;</span></span>
<span class="line"><span>			&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;</span></span>
<span class="line"><span>			&lt;artifactId&gt;jjwt-api&lt;/artifactId&gt;</span></span>
<span class="line"><span>			&lt;version&gt;0.11.5&lt;/version&gt;</span></span>
<span class="line"><span>		&lt;/dependency&gt;</span></span>
<span class="line"><span>		&lt;dependency&gt;</span></span>
<span class="line"><span>			&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;</span></span>
<span class="line"><span>			&lt;artifactId&gt;jjwt-impl&lt;/artifactId&gt;</span></span>
<span class="line"><span>			&lt;version&gt;0.11.5&lt;/version&gt;</span></span>
<span class="line"><span>		&lt;/dependency&gt;</span></span>
<span class="line"><span>		&lt;dependency&gt;</span></span>
<span class="line"><span>			&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;</span></span>
<span class="line"><span>			&lt;artifactId&gt;jjwt-jackson&lt;/artifactId&gt;</span></span>
<span class="line"><span>			&lt;version&gt;0.11.5&lt;/version&gt;</span></span>
<span class="line"><span>		&lt;/dependency&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>		&lt;dependency&gt;</span></span>
<span class="line"><span>			&lt;groupId&gt;org.springdoc&lt;/groupId&gt;</span></span>
<span class="line"><span>			&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;</span></span>
<span class="line"><span>			&lt;version&gt;2.5.0&lt;/version&gt;</span></span>
<span class="line"><span>		&lt;/dependency&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>		&lt;dependency&gt;</span></span>
<span class="line"><span>			&lt;groupId&gt;org.hibernate&lt;/groupId&gt;</span></span>
<span class="line"><span>			&lt;artifactId&gt;hibernate-jpamodelgen&lt;/artifactId&gt;</span></span>
<span class="line"><span>			&lt;version&gt;6.1.7.Final&lt;/version&gt;</span></span>
<span class="line"><span>		&lt;/dependency&gt;</span></span>
<span class="line"><span>	&lt;/dependencies&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	&lt;build&gt;</span></span>
<span class="line"><span>		&lt;plugins&gt;</span></span>
<span class="line"><span>			&lt;plugin&gt;</span></span>
<span class="line"><span>				&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></span>
<span class="line"><span>				&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span></span>
<span class="line"><span>				&lt;configuration&gt;</span></span>
<span class="line"><span>					&lt;excludes&gt;</span></span>
<span class="line"><span>						&lt;exclude&gt;</span></span>
<span class="line"><span>							&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span></span>
<span class="line"><span>							&lt;artifactId&gt;lombok&lt;/artifactId&gt;</span></span>
<span class="line"><span>						&lt;/exclude&gt;</span></span>
<span class="line"><span>					&lt;/excludes&gt;</span></span>
<span class="line"><span>				&lt;/configuration&gt;</span></span>
<span class="line"><span>			&lt;/plugin&gt;</span></span>
<span class="line"><span>		&lt;/plugins&gt;</span></span>
<span class="line"><span>	&lt;/build&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;/project&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h2 id="src-test-java-ru-atomskills-back-backapplicationtest-java" tabindex="-1"><a class="header-anchor" href="#src-test-java-ru-atomskills-back-backapplicationtest-java"><span>src/test/java/ru/atomskills/back/BackApplicationTest.java</span></a></h2><p>–î–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞–µ—Ç –º–æ–¥—É–ª—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è JavaSpring –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. <br><br></p><h2 id="src-main-java-ru-atomskills-back" tabindex="-1"><a class="header-anchor" href="#src-main-java-ru-atomskills-back"><span>src/main/java/ru/atomskills/back</span></a></h2><h3 id="configs" tabindex="-1"><a class="header-anchor" href="#configs"><span>configs</span></a></h3><p>–î–∞–Ω–Ω–∞—è –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —Ä–∞–±–æ—Ç—ã —Å JWT.</p><hr><h4 id="jwtauthfilter-java" tabindex="-1"><a class="header-anchor" href="#jwtauthfilter-java"><span>JwtAuthFilter.java</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>package ru.atomskills.back.configs;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import jakarta.servlet.FilterChain;</span></span>
<span class="line"><span>import jakarta.servlet.ServletException;</span></span>
<span class="line"><span>import jakarta.servlet.http.HttpServletRequest;</span></span>
<span class="line"><span>import jakarta.servlet.http.HttpServletResponse;</span></span>
<span class="line"><span>import lombok.RequiredArgsConstructor;</span></span>
<span class="line"><span>import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;</span></span>
<span class="line"><span>import org.springframework.security.core.context.SecurityContextHolder;</span></span>
<span class="line"><span>import org.springframework.security.core.userdetails.UserDetails;</span></span>
<span class="line"><span>import org.springframework.security.web.authentication.WebAuthenticationDetailsSource;</span></span>
<span class="line"><span>import org.springframework.stereotype.Component;</span></span>
<span class="line"><span>import org.springframework.web.filter.OncePerRequestFilter;</span></span>
<span class="line"><span>import ru.atomskills.back.services.AppUsersService;</span></span>
<span class="line"><span>import ru.atomskills.back.utils.JwtUtil;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import java.io.IOException;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import static org.springframework.http.HttpHeaders.AUTHORIZATION;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>@Component</span></span>
<span class="line"><span>@RequiredArgsConstructor</span></span>
<span class="line"><span>public class JwtAuthFilter extends OncePerRequestFilter {</span></span>
<span class="line"><span>    private final AppUsersService appUsersService;</span></span>
<span class="line"><span>    private final JwtUtil jwtUtil;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    @Override</span></span>
<span class="line"><span>    protected void doFilterInternal(</span></span>
<span class="line"><span>            HttpServletRequest request,</span></span>
<span class="line"><span>            HttpServletResponse response,</span></span>
<span class="line"><span>            FilterChain filterChain</span></span>
<span class="line"><span>    ) throws ServletException, IOException {</span></span>
<span class="line"><span>        final String authHeader = request.getHeader(AUTHORIZATION);</span></span>
<span class="line"><span>        final String username;</span></span>
<span class="line"><span>        final String jwtToken;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        if (authHeader == null || !authHeader.startsWith(&quot;Bearer&quot;)) {</span></span>
<span class="line"><span>            filterChain.doFilter(request, response);</span></span>
<span class="line"><span>            return;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        jwtToken = authHeader.substring(7);</span></span>
<span class="line"><span>        username = jwtUtil.extractUsername(jwtToken);</span></span>
<span class="line"><span>        if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {</span></span>
<span class="line"><span>            UserDetails userDetails = appUsersService.loadUserByUsername(username);</span></span>
<span class="line"><span>            final boolean isTokenValid = jwtUtil.isTokenValid(jwtToken, userDetails);</span></span>
<span class="line"><span>            if (isTokenValid) {</span></span>
<span class="line"><span>                UsernamePasswordAuthenticationToken authToken =</span></span>
<span class="line"><span>                        new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());</span></span>
<span class="line"><span>                authToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));</span></span>
<span class="line"><span>                SecurityContextHolder.getContext().setAuthentication(authToken);</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        filterChain.doFilter(request, response);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    @Override</span></span>
<span class="line"><span>    protected boolean shouldNotFilter(HttpServletRequest request) {</span></span>
<span class="line"><span>        String path = request.getServletPath();</span></span>
<span class="line"><span>        return path.startsWith(&quot;/auth&quot;);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h4 id="securityconfig-java" tabindex="-1"><a class="header-anchor" href="#securityconfig-java"><span>SecurityConfig.java</span></a></h4><p>–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.<br><br> –î–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ bcrypt - –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è —Ö–µ—à-—Ñ—É–Ω–∫—Ü–∏—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∫–ª—é—á–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –¥–ª—è –∑–∞—â–∏—â–µ–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π.</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>package ru.atomskills.back.configs;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import lombok.RequiredArgsConstructor;</span></span>
<span class="line"><span>import org.springframework.context.annotation.Bean;</span></span>
<span class="line"><span>import org.springframework.context.annotation.Configuration;</span></span>
<span class="line"><span>import org.springframework.http.HttpMethod;</span></span>
<span class="line"><span>import org.springframework.security.authentication.AuthenticationManager;</span></span>
<span class="line"><span>import org.springframework.security.authentication.AuthenticationProvider;</span></span>
<span class="line"><span>import org.springframework.security.authentication.dao.DaoAuthenticationProvider;</span></span>
<span class="line"><span>import org.springframework.security.config.Customizer;</span></span>
<span class="line"><span>import org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;</span></span>
<span class="line"><span>import org.springframework.security.config.annotation.web.builders.HttpSecurity;</span></span>
<span class="line"><span>import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;</span></span>
<span class="line"><span>import org.springframework.security.config.annotation.web.configurers.AbstractHttpConfigurer;</span></span>
<span class="line"><span>import org.springframework.security.config.http.SessionCreationPolicy;</span></span>
<span class="line"><span>import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;</span></span>
<span class="line"><span>import org.springframework.security.web.SecurityFilterChain;</span></span>
<span class="line"><span>import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;</span></span>
<span class="line"><span>import org.springframework.web.cors.CorsConfiguration;</span></span>
<span class="line"><span>import org.springframework.web.cors.CorsConfigurationSource;</span></span>
<span class="line"><span>import org.springframework.web.cors.UrlBasedCorsConfigurationSource;</span></span>
<span class="line"><span>import ru.atomskills.back.services.AppUsersService;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import java.util.List;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>@Configuration</span></span>
<span class="line"><span>@EnableWebSecurity</span></span>
<span class="line"><span>@RequiredArgsConstructor</span></span>
<span class="line"><span>public class SecurityConfig {</span></span>
<span class="line"><span>    private final JwtAuthFilter jwtAuthFilter;</span></span>
<span class="line"><span>    private final AppUsersService appUsersService;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    @Bean</span></span>
<span class="line"><span>    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {</span></span>
<span class="line"><span>        http</span></span>
<span class="line"><span>            .cors(Customizer.withDefaults())</span></span>
<span class="line"><span>            .csrf(AbstractHttpConfigurer::disable)</span></span>
<span class="line"><span>            .authorizeHttpRequests((authorize) -&gt; authorize</span></span>
<span class="line"><span>//                .requestMatchers(&quot;/auth/**&quot;, &quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;).permitAll()</span></span>
<span class="line"><span>//                .requestMatchers(HttpMethod.POST, &quot;/entities/**&quot;).hasRole(&quot;ADMIN&quot;)</span></span>
<span class="line"><span>//                .requestMatchers(HttpMethod.PUT, &quot;/entities/**&quot;).hasRole(&quot;ADMIN&quot;)</span></span>
<span class="line"><span>//                .requestMatchers(HttpMethod.DELETE, &quot;/entities/**&quot;).hasRole(&quot;ADMIN&quot;)</span></span>
<span class="line"><span>//                .anyRequest().authenticated()</span></span>
<span class="line"><span>                            .anyRequest().permitAll()</span></span>
<span class="line"><span>            )</span></span>
<span class="line"><span>            .sessionManagement((session) -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))</span></span>
<span class="line"><span>            .authenticationProvider(authenticationProvider())</span></span>
<span class="line"><span>            .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class);</span></span>
<span class="line"><span>        return http.build();</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    @Bean</span></span>
<span class="line"><span>    public AuthenticationProvider authenticationProvider() {</span></span>
<span class="line"><span>        final DaoAuthenticationProvider authenticationProvider = new DaoAuthenticationProvider();</span></span>
<span class="line"><span>        authenticationProvider.setUserDetailsService(appUsersService);</span></span>
<span class="line"><span>        authenticationProvider.setPasswordEncoder(bCryptPasswordEncoder());</span></span>
<span class="line"><span>        return authenticationProvider;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    @Bean</span></span>
<span class="line"><span>    public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception{</span></span>
<span class="line"><span>        return authenticationConfiguration.getAuthenticationManager();</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    @Bean</span></span>
<span class="line"><span>    public BCryptPasswordEncoder bCryptPasswordEncoder() {</span></span>
<span class="line"><span>        return new BCryptPasswordEncoder();</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    @Bean</span></span>
<span class="line"><span>    CorsConfigurationSource corsConfigurationSource() {</span></span>
<span class="line"><span>        CorsConfiguration configuration = new CorsConfiguration();</span></span>
<span class="line"><span>        configuration.setAllowedOrigins(List.of(&quot;*&quot;));</span></span>
<span class="line"><span>        configuration.setAllowedMethods(List.of(&quot;*&quot;));</span></span>
<span class="line"><span>        configuration.setAllowedHeaders(List.of(&quot;*&quot;));</span></span>
<span class="line"><span>        configuration.setExposedHeaders(List.of(&quot;*&quot;));</span></span>
<span class="line"><span>        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();</span></span>
<span class="line"><span>        source.registerCorsConfiguration(&quot;/**&quot;, configuration);</span></span>
<span class="line"><span>        return source;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><br><br></p><h3 id="controllers" tabindex="-1"><a class="header-anchor" href="#controllers"><span>controllers</span></a></h3><p>–°–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –≤ –≤–∏–¥–µ API.</p><hr><h4 id="authenticationcontroller-java" tabindex="-1"><a class="header-anchor" href="#authenticationcontroller-java"><span>AuthenticationController.java</span></a></h4><p>–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø–æ <a class="route-link" href="/atom_docs/api/auth.html">—Å—Å—ã–ª–∫–µ</a>.</p><h4 id="lessonscontroller-java" tabindex="-1"><a class="header-anchor" href="#lessonscontroller-java"><span>LessonsController.java</span></a></h4><p>–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—è–º–∏ —É—á–µ–±–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø–æ <a class="route-link" href="/atom_docs/api/lessons.html">—Å—Å—ã–ª–∫–µ</a>.</p><h4 id="taskscontroller-java" tabindex="-1"><a class="header-anchor" href="#taskscontroller-java"><span>TasksController.java</span></a></h4><p>–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—è–º–∏ –∑–∞–¥–∞–Ω–∏–π. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø–æ <a class="route-link" href="/atom_docs/api/tasks.html">—Å—Å—ã–ª–∫–µ</a>.</p><h4 id="topicscontroller-java" tabindex="-1"><a class="header-anchor" href="#topicscontroller-java"><span>TopicsController.java</span></a></h4><p>–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—è–º–∏ —Ç–µ–º. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø–æ <a class="route-link" href="/atom_docs/api/topics.html">—Å—Å—ã–ª–∫–µ</a>. <br><br></p><h3 id="dto" tabindex="-1"><a class="header-anchor" href="#dto"><span>dto</span></a></h3><p>–°–æ–¥–µ—Ä–∂–∏—Ç –º–æ–¥–µ–ª–∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –∏–∑ Frontend –≤ Backend.</p><hr><h4 id="authrequest-java" tabindex="-1"><a class="header-anchor" href="#authrequest-java"><span>AuthRequest.java</span></a></h4><p>–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>package ru.atomskills.back.dto;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import lombok.Data;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>@Data</span></span>
<span class="line"><span>public class AuthRequest {</span></span>
<span class="line"><span>    private String username;</span></span>
<span class="line"><span>    private String password;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="lessondto-java" tabindex="-1"><a class="header-anchor" href="#lessondto-java"><span>LessonDto.java</span></a></h4><p>–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö —É—á–µ–±–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞.</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>package ru.atomskills.back.dto;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import lombok.Builder;</span></span>
<span class="line"><span>import lombok.Data;</span></span>
<span class="line"><span>import ru.atomskills.back.models.Lesson;</span></span>
<span class="line"><span>import ru.atomskills.back.models.Task;</span></span>
<span class="line"><span>import ru.atomskills.back.models.Topic;</span></span>
<span class="line"><span>import ru.atomskills.back.models.Trait;</span></span>
<span class="line"><span>import ru.atomskills.back.services.LessonsService;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import java.util.List;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>@Data</span></span>
<span class="line"><span>@Builder</span></span>
<span class="line"><span>public class LessonDto {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    private String code;</span></span>
<span class="line"><span>    private String title;</span></span>
<span class="line"><span>    private String content;</span></span>
<span class="line"><span>    private List&lt;Trait&gt; traits;</span></span>
<span class="line"><span>    private List&lt;Lesson.Supplement&gt; supplement;</span></span>
<span class="line"><span>    private List&lt;TaskShortDto&gt; tasks;</span></span>
<span class="line"><span>    private String author;</span></span>
<span class="line"><span>    private List&lt;Topic&gt; topics;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    public static LessonDto fromEntity(Lesson lesson) {</span></span>
<span class="line"><span>        return LessonDto.builder()</span></span>
<span class="line"><span>                .code(lesson.getCode())</span></span>
<span class="line"><span>                .title(lesson.getTitle())</span></span>
<span class="line"><span>                .content(lesson.getContent())</span></span>
<span class="line"><span>                .traits(lesson.getTraits())</span></span>
<span class="line"><span>                .supplement(lesson.getSupplement())</span></span>
<span class="line"><span>                .tasks(lesson.getTasks().stream().map(TaskShortDto::fromEntity).toList())</span></span>
<span class="line"><span>                .author(lesson.getAuthor())</span></span>
<span class="line"><span>                .topics(lesson.getTopics())</span></span>
<span class="line"><span>                .build();</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="lessonshortdto-java" tabindex="-1"><a class="header-anchor" href="#lessonshortdto-java"><span>LessonShortDto.java</span></a></h4><p>–ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—É—é –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö —É—á–µ–±–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ —Å —Å–æ–∫—Ä–∞—â–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –ø–æ –Ω–µ–π.</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>package ru.atomskills.back.dto;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import lombok.Builder;</span></span>
<span class="line"><span>import lombok.Data;</span></span>
<span class="line"><span>import ru.atomskills.back.models.Lesson;</span></span>
<span class="line"><span>import ru.atomskills.back.models.Trait;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import java.util.List;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>@Data</span></span>
<span class="line"><span>@Builder</span></span>
<span class="line"><span>public class LessonShortDto {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    private String code;</span></span>
<span class="line"><span>    private String title;</span></span>
<span class="line"><span>    private List&lt;Trait&gt; traits;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    public static LessonShortDto fromEntity(Lesson lesson) {</span></span>
<span class="line"><span>        return LessonShortDto.builder()</span></span>
<span class="line"><span>                .code(lesson.getCode())</span></span>
<span class="line"><span>                .title(lesson.getTitle())</span></span>
<span class="line"><span>                .traits(lesson.getTraits())</span></span>
<span class="line"><span>                .build();</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="loginresponse-java" tabindex="-1"><a class="header-anchor" href="#loginresponse-java"><span>LoginResponse.java</span></a></h4><p>–ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—É—é –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –∑–∞–ø—Ä–æ—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>package ru.atomskills.back.dto;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import lombok.Builder;</span></span>
<span class="line"><span>import lombok.Data;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>@Data</span></span>
<span class="line"><span>@Builder</span></span>
<span class="line"><span>public class LoginResponse {</span></span>
<span class="line"><span>    private String token;</span></span>
<span class="line"><span>    private String refreshToken;</span></span>
<span class="line"><span>    private long expiresIn;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="refreshrequest-java" tabindex="-1"><a class="header-anchor" href="#refreshrequest-java"><span>RefreshRequest.java</span></a></h4><p>–ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—É—é –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞.</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>package ru.atomskills.back.dto;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import lombok.Data;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>@Data</span></span>
<span class="line"><span>public class RefreshRequest {</span></span>
<span class="line"><span>    private String refreshToken;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="taskdto-java" tabindex="-1"><a class="header-anchor" href="#taskdto-java"><span>TaskDto.java</span></a></h4><p>–ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—É—é –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏—è.</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>package ru.atomskills.back.dto;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import lombok.Data;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>@Data</span></span>
<span class="line"><span>public class RefreshRequest {</span></span>
<span class="line"><span>    private String refreshToken;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="taskshortdto-java" tabindex="-1"><a class="header-anchor" href="#taskshortdto-java"><span>TaskShortDto.java</span></a></h4><p>–ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—É—é –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏—è —Å —Å–∫–æ—Ä–∞—â–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –ø–æ –Ω–µ–π.</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>package ru.atomskills.back.dto;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import lombok.Builder;</span></span>
<span class="line"><span>import lombok.Data;</span></span>
<span class="line"><span>import ru.atomskills.back.models.Task;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>@Data</span></span>
<span class="line"><span>@Builder</span></span>
<span class="line"><span>public class TaskShortDto {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    private String code;</span></span>
<span class="line"><span>    private String title;</span></span>
<span class="line"><span>    private Integer difficulty;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    public static TaskShortDto fromEntity(Task task) {</span></span>
<span class="line"><span>        return TaskShortDto.builder()</span></span>
<span class="line"><span>                .code(task.getCode())</span></span>
<span class="line"><span>                .title(task.getTitle())</span></span>
<span class="line"><span>                .difficulty(task.getDifficulty())</span></span>
<span class="line"><span>                .build();</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><br><br></p><h3 id="models">models</h3> –°–æ–¥–µ—Ä–∂–∏—Ç –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö, —Å–æ—Ö—Ä–∞–Ω—è–µ–º—ã–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö. <hr><h4 id="appuser-java" tabindex="-1"><a class="header-anchor" href="#appuser-java"><span>AppUser.java</span></a></h4><p>–ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–∏—Å—Ç–µ–º—ã</p><h4 id="feature-java" tabindex="-1"><a class="header-anchor" href="#feature-java"><span>Feature.java</span></a></h4><p>–ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–∏—Å—Ç–µ–º—ã. –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ —Ñ–∞–π–ª–æ–≤ –æ–∫—Ä—É–∂–µ–Ω–∏—è.</p><h4 id="lesson-java" tabindex="-1"><a class="header-anchor" href="#lesson-java"><span>Lesson.java</span></a></h4><p>–ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–∏—Å—Ç–µ–º—ã. –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ —Ñ–∞–π–ª–æ–≤ –æ–∫—Ä—É–∂–µ–Ω–∏—è.</p><h4 id="role-java" tabindex="-1"><a class="header-anchor" href="#role-java"><span>Role.java</span></a></h4><p>–ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–∏—Å—Ç–µ–º—ã. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏. –í—Å–µ–≥–æ –¥–≤–µ —Ä–æ–ª–∏:</p><ul><li>–û–±—É—á–∞—é—â–∏–π—Å—è;</li><li>–ù–∞—Å—Ç–∞–≤–Ω–∏–∫;</li></ul><h4 id="task-java" tabindex="-1"><a class="header-anchor" href="#task-java"><span>Task.java</span></a></h4><p>–ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–∏—Å—Ç–µ–º—ã. –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ —Ñ–∞–π–ª–æ–≤ –æ–∫—Ä—É–∂–µ–Ω–∏—è.</p><h4 id="taskprogress-java" tabindex="-1"><a class="header-anchor" href="#taskprogress-java"><span>TaskProgress.java</span></a></h4><p>–ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–∏—Å—Ç–µ–º—ã</p><h4 id="tasksubmission-java" tabindex="-1"><a class="header-anchor" href="#tasksubmission-java"><span>TaskSubmission.java</span></a></h4><p>–ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–∏—Å—Ç–µ–º—ã</p><h4 id="topic-java" tabindex="-1"><a class="header-anchor" href="#topic-java"><span>Topic.java</span></a></h4><p>–ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–∏—Å—Ç–µ–º—ã. –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ —Ñ–∞–π–ª–æ–≤ –æ–∫—Ä—É–∂–µ–Ω–∏—è.</p><h4 id="trait-java" tabindex="-1"><a class="header-anchor" href="#trait-java"><span>Trait.java</span></a></h4><p>–ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–∏—Å—Ç–µ–º—ã. –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ —Ñ–∞–π–ª–æ–≤ –æ–∫—Ä—É–∂–µ–Ω–∏—è. <br><br></p><h3 id="repositories" tabindex="-1"><a class="header-anchor" href="#repositories"><span>repositories</span></a></h3><p>–°–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ <a href="#models">models</a>. <br><br></p><h3 id="services" tabindex="-1"><a class="header-anchor" href="#services"><span>services</span></a></h3><p>–°–æ–¥–µ—Ä–∂–∏—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—è–º–∏</p><hr><h4 id="appuserservice-java" tabindex="-1"><a class="header-anchor" href="#appuserservice-java"><span>AppUserService.java</span></a></h4><p>–°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—å—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.</p><h4 id="authenticationservice-java" tabindex="-1"><a class="header-anchor" href="#authenticationservice-java"><span>AuthenticationService.java</span></a></h4><p>–°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—å—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.</p><h4 id="fileloader-java" tabindex="-1"><a class="header-anchor" href="#fileloader-java"><span>FileLoader.java</span></a></h4><p>–°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—å—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.</p><h4 id="lessonsservice-java" tabindex="-1"><a class="header-anchor" href="#lessonsservice-java"><span>LessonsService.java</span></a></h4><p>–°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—å—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.</p><h4 id="tasksservice-java" tabindex="-1"><a class="header-anchor" href="#tasksservice-java"><span>TasksService.java</span></a></h4><p>–°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—å—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.</p><h4 id="topicsservice-java" tabindex="-1"><a class="header-anchor" href="#topicsservice-java"><span>TopicsService.java</span></a></h4><p>–°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—å—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. <br><br></p><h3 id="utils" tabindex="-1"><a class="header-anchor" href="#utils"><span>utils</span></a></h3><p>–£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ –∏ JWT —Ç–æ–∫–µ–Ω–∞–º–∏.</p><hr><h4 id="filesutil-java" tabindex="-1"><a class="header-anchor" href="#filesutil-java"><span>FilesUtil.java</span></a></h4><p>–†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏.</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>package ru.atomskills.back.utils;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import org.springframework.core.io.PathResource;</span></span>
<span class="line"><span>import org.springframework.core.io.Resource;</span></span>
<span class="line"><span>import org.springframework.web.multipart.MultipartFile;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import java.io.IOException;</span></span>
<span class="line"><span>import java.io.InputStream;</span></span>
<span class="line"><span>import java.nio.file.Files;</span></span>
<span class="line"><span>import java.nio.file.Path;</span></span>
<span class="line"><span>import java.nio.file.Paths;</span></span>
<span class="line"><span>import java.nio.file.StandardCopyOption;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>public class FilesUtil {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    private final static String BASE_DIR = &quot;files&quot;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    public static void saveFile(String path, String fileName, MultipartFile multipartFile) throws IOException {</span></span>
<span class="line"><span>        Path uploadPath = Paths.get(BASE_DIR, path);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        if (!Files.exists(uploadPath)) {</span></span>
<span class="line"><span>            Files.createDirectories(uploadPath);</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        try (InputStream inputStream = multipartFile.getInputStream()) {</span></span>
<span class="line"><span>            Path filePath = uploadPath.resolve(fileName);</span></span>
<span class="line"><span>            Files.copy(inputStream, filePath, StandardCopyOption.REPLACE_EXISTING);</span></span>
<span class="line"><span>        } catch (IOException ioe) {</span></span>
<span class="line"><span>            throw new IOException(&quot;Could not save file: &quot; + fileName, ioe);</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    public static Resource getFile(String path, String fileName) {</span></span>
<span class="line"><span>        return new PathResource(Paths.get(BASE_DIR, path, fileName));</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="jwtutil-java" tabindex="-1"><a class="header-anchor" href="#jwtutil-java"><span>JwtUtil.java</span></a></h4><p>–†–∞–±–æ—Ç–∞ —Å JWT —Ç–æ–∫–µ–Ω–∞–º–∏.</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>package ru.atomskills.back.utils;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import io.jsonwebtoken.Claims;</span></span>
<span class="line"><span>import io.jsonwebtoken.Jwts;</span></span>
<span class="line"><span>import io.jsonwebtoken.SignatureAlgorithm;</span></span>
<span class="line"><span>import io.jsonwebtoken.security.Keys;</span></span>
<span class="line"><span>import org.springframework.security.core.userdetails.UserDetails;</span></span>
<span class="line"><span>import org.springframework.stereotype.Component;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>import javax.crypto.SecretKey;</span></span>
<span class="line"><span>import java.util.Date;</span></span>
<span class="line"><span>import java.util.concurrent.TimeUnit;</span></span>
<span class="line"><span>import java.util.function.Function;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>@Component</span></span>
<span class="line"><span>public class JwtUtil {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    private static final Long EXPIRATION_TIME = TimeUnit.HOURS.toMillis(1);</span></span>
<span class="line"><span>    private static final Long REFRESH_EXPIRATION_TIME = TimeUnit.DAYS.toMillis(1);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    private final SecretKey key = Keys.secretKeyFor(SignatureAlgorithm.HS256);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    public String extractUsername(String token) {</span></span>
<span class="line"><span>        return extractClaim(token, Claims::getSubject);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    public Date extractExpiration(String token) {</span></span>
<span class="line"><span>        return extractClaim(token, Claims::getExpiration);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    public boolean hasClaim(String token, String claimName) {</span></span>
<span class="line"><span>        final Claims claims = extractAllClaims(token);</span></span>
<span class="line"><span>        return claims.get(claimName) != null;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    private &lt;T&gt; T extractClaim(String token, Function&lt;Claims, T&gt; claimsResolver) {</span></span>
<span class="line"><span>        final Claims claims = extractAllClaims(token);</span></span>
<span class="line"><span>        return claimsResolver.apply(claims);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    private Claims extractAllClaims(String token) {</span></span>
<span class="line"><span>        return Jwts.parserBuilder().setSigningKey(key).build().parseClaimsJws(token).getBody();</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    public boolean isTokenExpired(String token) {</span></span>
<span class="line"><span>        return extractExpiration(token).before(new Date());</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    public String generateAccessToken(UserDetails userDetails) {</span></span>
<span class="line"><span>        return Jwts.builder()</span></span>
<span class="line"><span>                .setSubject(userDetails.getUsername())</span></span>
<span class="line"><span>                .claim(&quot;authorities&quot;, userDetails.getAuthorities())</span></span>
<span class="line"><span>                .setIssuedAt(new Date(System.currentTimeMillis()))</span></span>
<span class="line"><span>                .setExpiration(new Date(System.currentTimeMillis() + EXPIRATION_TIME))</span></span>
<span class="line"><span>                .signWith(key).compact();</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    public String generateRefreshToken(UserDetails userDetails) {</span></span>
<span class="line"><span>        return Jwts.builder()</span></span>
<span class="line"><span>                .setSubject(userDetails.getUsername())</span></span>
<span class="line"><span>                .setExpiration(new Date(System.currentTimeMillis() + REFRESH_EXPIRATION_TIME))</span></span>
<span class="line"><span>                .signWith(key)</span></span>
<span class="line"><span>                .compact();</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    public long getExpirationTime() {</span></span>
<span class="line"><span>        return EXPIRATION_TIME;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    public boolean isTokenValid(String token, UserDetails userDetails) {</span></span>
<span class="line"><span>        final String username = extractUsername(token);</span></span>
<span class="line"><span>        return (username.equals(userDetails.getUsername()) &amp;&amp; !isTokenExpired(token));</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: </span><!----></div><div class="contributors"><span class="vp-meta-label">–ö–æ–Ω—Ç—Ä–∏–±—å—é—Ç–æ—Ä—ã: </span><!--[--><!--[--><span class="vp-meta-info" title="email: karelio2001@mail.ru">karen</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/atom_docs/project/frontend.html" aria-label="Frontend-–ø—Ä–æ–µ–∫—Ç"><div class="hint"><span class="arrow start"></span>–ü—Ä–µ–¥—ã–¥—É—â–∞—è</div><div class="link"><!---->Frontend-–ø—Ä–æ–µ–∫—Ç</div></a><!----></nav><!----><!----><!--]--></main><!--]--><!----></div><!--]--><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/atom_docs/assets/app-Chc13kEl.js" defer></script>
  </body>
</html>
